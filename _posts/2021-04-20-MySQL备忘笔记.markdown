---
title: MySQL备忘笔记
author: ynf
date: 2021-04-20 11:23:31 +0800
categories: [数据库]
tags: [MySQL]
---
### **数据库三大范式是什么**
第一范式：每个列都不可再分；

第二范式：在第一范式的基础上，所有列都必须完全依赖于主键，而不能只依赖主键的一部分；

第三范式：在第二范式的基础上，非主键列只能依赖于主键列，而不能依赖于非主键列；

在设计数据库时要尽量遵循三大范式，如果不遵循必须要有充足的理由，比如性能考虑，会采用适当的字段冗余来减少连表操作。

### **MySQL的binlog有几种录入格式？分别有什么区别？**
MySQL的binglog一共有3中录入格式，分别是：statement、row、mixed。

statement：只记录会修改的sql，以及执行sql的上下文信息，不会记录每一行记录的具体修改，减少了binlog的日志量，减少IO，提高效率，但是某些函数的执行不会记录日志；

row：记录每一行的修改，不会记录sql执行的上下文信息，全部日志都会记录，但是遇到表结构修改时，会产生大量的日志。

mixed：折中的处理方法，一般情况下使用statement格式，当statement无法使用时使用row格式录入。

新版的mysql对row格式录入做了优化，当表结构发生改变时，只记录sql，不会记录每行的改变；

### **mysql有哪些数据类型**
**整数类型**：tinyint、smallint、mediumint、int、bigint，分别是1字节，2字节，3字节，4字节，8字节。其中长度只是限制了显示字符个数，而没有限制字段的写入范围，长度需要配合unsigned才有意义；

**实数类型**：float、double、decimal，decimal可以表示比bigint还大的整型，并且存储精确的小数，float是单精度浮点数，double是双精度浮点数，有取值范围，能做近似值计算；计算时FLOAT和DOUBLE相比DECIMAL效率更高一些，DECIMAL你可以理解成是用字符串进行处理。

**字符串类型**：char、varchar、text、blobvarchar，其中char是定长字符，固定存储空间，内容会被截断，长度不足时，尾端用空格填充，而varchar是不定长字符串类型，用1个或2个字节记录长度，但字符串长度不足255字节时，使用1个字节记录长度，超过255时用2个字节记录长度，存储的内容超出设置的长度时，内容会被截断。

使用策略：

对于经常变更的数据来说，CHAR比VARCHAR更好，因为CHAR不容易产生碎片。

对于非常短的列，CHAR比VARCHAR在存储空间上更有效率。

使用时要注意只分配需要的空间，更长的列排序时会消耗更多内存。尽量避免使用TEXT/BLOB类型，查询时会使用临时表，导致严重的性能开销。

**枚举类型（ENUM）**：把不重复的数据存储为一个预定义的集合。有时可以使用ENUM代替常用的字符串类型。ENUM存储非常紧凑，会把列表值压缩到1个或2个字节。ENUM在内部存储时，其实存的是整数。尽量避免使用数字作为ENUM枚举的常量，因为容易混乱。排序是按照内部存储的整数；

**日期和时间类型**：尽量使用timestamp，空间效率高于datetime，用整数保存时间戳通常不方便处理。如果需要存储微妙，可以使用bigint存储。
