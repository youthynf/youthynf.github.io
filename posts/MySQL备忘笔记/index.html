<!DOCTYPE html><html lang="en-US" mode="light" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="MySQL备忘笔记" /><meta name="author" content="ynf" /><meta property="og:locale" content="en_US" /><meta name="description" content="数据库三大范式是什么 第一范式：每个列都不可再分；" /><meta property="og:description" content="数据库三大范式是什么 第一范式：每个列都不可再分；" /><link rel="canonical" href="https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/" /><meta property="og:url" content="https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/" /><meta property="og:site_name" content="严能发的博客" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2021-04-20T11:23:31+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="MySQL备忘笔记" /><meta name="twitter:site" content="@" /><meta name="twitter:creator" content="@ynf" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"ynf"},"description":"数据库三大范式是什么 第一范式：每个列都不可再分；","url":"https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/","@type":"BlogPosting","headline":"MySQL备忘笔记","dateModified":"2021-04-22T09:25:14+08:00","datePublished":"2021-04-20T11:23:31+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/"},"@context":"https://schema.org"}</script><title>MySQL备忘笔记 | 严能发的博客</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="https://cdn.jsdelivr.net"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id="></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', ''); }); </script> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "https://hm.baidu.com/hm.js?4dff01b016fbd71615a3abf5d9c1f1be"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/20438133?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">严能发的博客</a></div><div class="site-subtitle font-italic">遥远的目标经不起执着的追求。</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>首页</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>分类</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>标签</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>日志</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>关于</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/youthynf" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['yannengfa','126.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>MySQL备忘笔记</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="搜索..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>MySQL备忘笔记</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="semi-bold"> ynf </span> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Apr 20, 2021, 11:23 AM +0800" prep="on" > Apr 20 <i class="unloaded">2021-04-20T11:23:31+08:00</i> </span></div><div> <span> <span class="timeago lastmod" data-toggle="tooltip" data-placement="bottom" title="Thu, Apr 22, 2021, 9:25 AM +0800" prefix="Updated " > Apr 22 <i class="unloaded">2021-04-22T09:25:14+08:00</i> </span> </span> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4041 words">22 min</span></div></div><div class="post-content"><h2 id="数据库三大范式是什么"><strong>数据库三大范式是什么</strong></h2><p>第一范式：每个列都不可再分；</p><p>第二范式：在第一范式的基础上，所有列都必须完全依赖于主键，而不能只依赖主键的一部分；</p><p>第三范式：在第二范式的基础上，非主键列只能依赖于主键列，而不能依赖于非主键列；</p><p>在设计数据库时要尽量遵循三大范式，如果不遵循必须要有充足的理由，比如性能考虑，会采用适当的字段冗余来减少连表操作。</p><h2 id="mysql的binlog有几种录入格式分别有什么区别"><strong>MySQL的binlog有几种录入格式？分别有什么区别？</strong></h2><p>MySQL的binglog一共有3中录入格式，分别是：statement、row、mixed。</p><p><strong>statement</strong>：只记录会修改的sql，以及执行sql的上下文信息，不会记录每一行记录的具体修改，减少了binlog的日志量，减少IO，提高效率，但是某些函数的执行不会记录日志；</p><p><strong>row</strong>：记录每一行的修改，不会记录sql执行的上下文信息，全部日志都会记录，但是遇到表结构修改时，会产生大量的日志。</p><p><strong>mixed</strong>：折中的处理方法，一般情况下使用statement格式，当statement无法使用时使用row格式录入。</p><p>新版的mysql对row格式录入做了优化，当表结构发生改变时，只记录sql，不会记录每行的改变；</p><h2 id="mysql有哪些数据类型"><strong>mysql有哪些数据类型</strong></h2><p><strong>整数类型</strong>：tinyint、smallint、mediumint、int、bigint，分别是1字节，2字节，3字节，4字节，8字节。其中长度只是限制了显示字符个数，而没有限制字段的写入范围，长度需要配合unsigned才有意义；</p><p><strong>实数类型</strong>：float、double、decimal，decimal可以表示比bigint还大的整型，并且存储精确的小数，float是单精度浮点数，double是双精度浮点数，有取值范围，能做近似值计算；计算时FLOAT和DOUBLE相比DECIMAL效率更高一些，DECIMAL你可以理解成是用字符串进行处理。</p><p><strong>字符串类型</strong>：char、varchar、text、blobvarchar，其中char是定长字符，固定存储空间，内容会被截断，长度不足时，尾端用空格填充，而varchar是不定长字符串类型，用1个或2个字节记录长度，但字符串长度不足255字节时，使用1个字节记录长度，超过255时用2个字节记录长度，存储的内容超出设置的长度时，内容会被截断。</p><p>使用策略：</p><p>对于经常变更的数据来说，CHAR比VARCHAR更好，因为CHAR不容易产生碎片。</p><p>对于非常短的列，CHAR比VARCHAR在存储空间上更有效率。</p><p>使用时要注意只分配需要的空间，更长的列排序时会消耗更多内存。尽量避免使用TEXT/BLOB类型，查询时会使用临时表，导致严重的性能开销。</p><p><strong>枚举类型（ENUM）</strong>：把不重复的数据存储为一个预定义的集合。有时可以使用ENUM代替常用的字符串类型。ENUM存储非常紧凑，会把列表值压缩到1个或2个字节。ENUM在内部存储时，其实存的是整数。尽量避免使用数字作为ENUM枚举的常量，因为容易混乱。排序是按照内部存储的整数；</p><p><strong>日期和时间类型</strong>：尽量使用timestamp，空间效率高于datetime，用整数保存时间戳通常不方便处理。如果需要存储微妙，可以使用bigint存储。</p><h2 id="mysql中int10和char10以及varchar10的区别">mysql中int(10)和char(10)以及varchar(10)的区别</h2><ul><li><p>int(10)的10表示显示的数据的长度，不影响内部存储，只有该字段定义为unsignd只是影响带 zerofill定义的int时，不足位数的前面补多少个0，易于报表展示，并不是存储数据的大小；</p><li><p>char(10)表示存储定长的10个字符，不足10个就用空格补齐，占用更多的存储空间，超出10则将后面超出的字符串截去丢弃；</p><li><p>varchar(10)表示最大存储10个的字符，具体存储多少个就是多少个，空格也按一个字符存储，这一点是和char(10)的空格不同的，char(10)的空格表示占位不算一个字符，超出10则将后面超出的字符串截去丢弃。</p></ul><h2 id="mysql存储引擎myisam与innodb区别"><strong>MySQL存储引擎MyISAM与InnoDB区别</strong></h2><ol><li><p>事务：InnoDB提供了对数据库的ACID事务支持，而MyISAM不提供事务支持；</p><li><p>锁：InnoDB支持表级锁、行级锁，支持外键，而MyISAM只支持表级锁，并且不支持外键；</p><li><p>索引：</p></ol><p>① InnoDB索引是聚簇索引，数据和索引是集中存储的（.ibd），而MyISAM是非聚簇索引，数据和索引文件是分别存储的（数据是.MYD，索引是.MYI)；InnoDB记录存储顺序是按逐渐大小有序插入，而MyISAM是按插入顺序保存，在索引中键值有序,数据还是无序的。</p><p>② MyISAM支持全文索引，InnoDB1.2.x版本开始支持全文检索。</p><p>③ InnoDB的主键索引的叶子节点存储着行数据，而MyISAM索引的叶子节点存放的是行数据的地址，还需要再寻址一次；</p><h2 id="innodb引擎的4大特性"><strong>InnoDB引擎的4大特性</strong></h2><ul><li>插入缓冲（insertbuffer)</ul><p>对于非聚集索引的插入，先去判断我要插入的索引页是否已经在内存中了，如果存在，就直接插入，如果不在，我暂时不着急先把索引页加载到内存中，而是把它放到了一个Insert Buffer对象中，临时先放在这，然后以一定的频率将Insert Buffer和要插入的非聚集索引页进行合并。（必须是辅助索引，并且非唯一）</p><ul><li>二次写(doublewrite)</ul><p>当发生数据库宕机，可能innodb正在写入某个数据页到表中，而这个数据页只写了一部分，这种情况我们称之为”部分写失效”，很容易出现数据丢失的问题。</p><p>这种情况下，我们可能会想到通过redo log进行恢复，这是一个办法，但是也存在一些小问题，因为redo log记录的是对数据页的操作，如果这个数据页已经发生了损坏，这种情况下对数据页进行重做是没有意义的，我们必须保证有一个数据页的副本，通过数据页的副本来还原这个数据页，再进行重做，这就是我们所说的二次写，也称之为doublewrite。</p><p>具体流程：当我们需要对缓冲池中的脏页刷洗进磁盘时，我们会先将脏页复制到内存的double buffer中，大小是2MB，之后通过缓存，分两次，每次1MB地写入到共享表空间的物理磁盘上（128个数据页*16K=2MB），完成之后立马同步磁盘，这样，一份数据在磁盘上就有两个副本了。</p><p>如果在写入磁盘的时候出现了问题，innodb将会在共享表空间的doublewrite中找到该数据页的一个副本，将其复制到表空间文件，再应用重做日志，也就是redo log。</p><ul><li>自适应哈希索引(ahi)</ul><p>哈希（hash）是一种非常快的查找方法，一般情况下查找的时间复杂度为O(1)。</p><p>InnoDB存储引擎会监控对表上索引的查找，如果观察到建立哈希索引可以带来速度的提升，则建立哈希索引，所以称之为自适应（adaptive）的。</p><p>自适应哈希索引通过缓冲池的B+树构造而来，因此建立的速度很快。而且不需要将整个表都建哈希索引，InnoDB存储引擎会自动根据访问的频率和模式来为某些页建立哈希索引。</p><ul><li>预读(readahead)</ul><p>预读（read-ahead)操作是一种IO操作，用于异步将磁盘的页读取到buffer pool中，预料这些页会马上被读取到。预读请求的所有页集中在一个范围内。</p><p>InnoDB使用两种预读算法：</p><p><strong>Linear read-ahead</strong>：线性预读技术，预测在buffer pool中被访问到的数据它临近的页也会很快被访问到。如果一个extent中的被顺序读取的page超过或者等于该参数变量时，Innodb将会异步的将下一个extent读取到buffer pool中，innodb_read_ahead_threshold可以设置为0-64的任何值(因为一个extent中也就只有64页)，默认值为56，值越高，访问模式检查越严格。</p><p><strong>Random read-ahead</strong>: 随机预读，通过buffer pool中存中的页来预测哪些页可能很快会被访问，而不考虑这些页的读取顺序。random 预读放到以extent中的page为单位，着眼于将当前extent中的剩余的page提前读取到buffer pool中。</p><h2 id="什么是索引">什么是索引？</h2><p>索引是一种特殊的文件(InnoDB数据表上的索引是表空间的一个组成部分)，它 们包含着对数据表里所有记录的引用指针。</p><p>索引是一种数据结构。数据库索引，是数据库管理系统中一个排序的数据结构， 以协助快速查询、更新数据库表中数据。索引的实现通常使用B树及其变种。</p><h2 id="索引有哪几种类型">索引有哪几种类型？</h2><p><strong>主键索引:</strong></p><p>数据列不允许重复，不允许为NULL。一个表只有一个主键。</p><p><strong>唯一索引:</strong></p><p>数据列不能重复，允许为Null值；一个表允许有多个唯一索引。</p><p><strong>普通索引:</strong></p><p>基本的索引类型，没有唯一性的限制，允许为NULL值。包括：普通索引，组合索引，全文索引。</p><h2 id="一个mysql表最多可以有几列一个mysql表最多可以创建多少个索引单个索引最多可以包含多少个列一个索引最多可以有多长">一个mysql表最多可以有几列?一个mysql表最多可以创建多少个索引?单个索引最多可以包含多少个列?一个索引最多可以有多长?</h2><p><strong>innoDB:</strong> 最多创建1017列, 最多64个二级索引, 单个索引最多包含16列, 索引最大长度767字节(其实行格式为REDUNDANT,COMPACT最高为767字节,但行格式为DYNAMIC,COMPRESSED最高可达为3072字节), 行大小最大65536字节</p><p><strong>mysiam:</strong> 最多4096列, 最多64个二级索引, 单个索引最多包含16列, 索引最大长度1000字节, 行大小最大65536字节</p><h2 id="innodbb树索引全文索引哈希索引">InnoDB：B+树索引、全文索引、哈希索引</h2><ul><li><p>哈希索引是自适应的，也就是说这个不能人为干预在一张表生成哈希索引，InnoDB会根据这张表的使用情况来自动生成。</p><li><p>全文索引是将存在数据库的整本书的任意内容信息查找出来的技术，InnoDB从1.2.x版本支持。每张表只能有一个全文检索的索引。</p><li><p>B+树索引是传统意义上的索引，B+树索引并不能根据键值找到具体的行数据，B+树索引只能找到行数据锁在的页，然后通过把页读到内存，再在内存中查找到行数据。B+树索引也是最常用的最为频繁使用的索引。</p></ul><h2 id="一棵聚集索引b树可以放多少行数据">一棵聚集索引B+树可以放多少行数据？</h2><p>这里我们先假设B+树高为2，即存在一个根节点和若干个叶子节点，那么这棵B+树的存放总记录数为：根节点指针数*单个叶子节点记录行数。假设一行记录的数据大小为1k，那么单个叶子节点（页）中的记录数=16K/1K=16。</p><p>那么现在我们需要计算出非叶子节点能存放多少指针，我们假设主键ID为bigint类型，长度为8字节，而指针大小在InnoDB源码中设置为6字节，这样一共14字节，我们一个页中能存放多少这样的单元，其实就代表有多少指针，即16kb/14b=1170。那么可以算出一棵高度为2的B+树，大概能存放1170*16=18720条这样的数据记录。</p><p>根据同样的原理我们可以算出一个高度为3的B+树大概可以存放：1170<em>1170</em>16=21902400行数据。所以在InnoDB中B+树高度一般为1-3层，它就能满足千万级的数据存储。在查找数据时一次页的查找代表一次IO，所以通过主键索引查询通常只需要1-3次逻辑IO操作即可查找到数据。</p><h2 id="cardinality值">Cardinality值</h2><p>如何判断一个索引建立的是否好呢？可以用show index from指令查看Cardinality值，这个值是一个预估值，而不是一个准确值。每次对Cardinality值的统计都是随机取8个叶子节点得到的。实际应用中，（Cardinality/行数）应该尽量接近1.</p><p>对于innodb来说，达到以下2点就会重新计算cardinality：</p><ul><li>如果表中1/16的数据发生变化<li>如果stat_modified_counter&gt;200 000 0000</ul><p>需要强制刷新Cardinality值的话可以用：</p><pre><code class="language-$xslt">analyze local table xxx;
</code></pre><h2 id="dropdelete与truncate的区别">drop、delete与truncate的区别</h2><div class="table-wrapper"><table><thead><tr><th> <th>Delete<th>Truncate<th>Drop<tbody><tr><td>类型<td>属于DML<td>属于DDL<td>属于DDL<tr><td>回滚<td>可回滚<td>不可回滚<td>不可回滚<tr><td>删除内容<td>表结构还在，删除表的全部或者一部分数据行<td>表结构还在，删除表中的所有数据<td>从数据库中删除表，所有的数据行，索引和权限也会被删除<tr><td>删除速度<td>删除速度慢，需要逐行删除<td>删除速度快<td>删除速度快</table></div><p>因此，在不再需要一张表的时候，用drop；在想删除部分数据行时候，用 delete；在保留表而删除所有数据的时候用truncate。</p><h2 id="创建的索引有没有被使用到或者说怎么才可以知道这条语句运行很慢的原因">创建的索引有没有被使用到?或者说怎么才可以知道这条语句运行很慢的原因？</h2><p>MySQL提供了explain命令来查看sql的执行计划，执行计划显示的是数据库存储引擎执行sql时的详细情况信息，包括是否使用了索引，使用了什么索引，已经索引使用的相关信息。</p><p>执行计划的信息中，包含的信息有：</p><ul><li>id：表示执行的先后顺序（从大到小，从上往下，null多为union）；<li>select_type：表示每个子查询的类型，有simple不含子查询、primary外层查询等<li>type：访问类型，All是全表扫描，index遍历索引，range索引范围查找，ref使用非唯一索引查找数据，consts单表中最多只有一行匹配上；<li>possible_keys：可能使用的索引，但不一定会使用；<li>key：实际用到的索引；<li>rows：表示计划预计遍历查询的记录数；<li>ref：显示索引的哪一列被使用了，如果可能的话，是一个常数；<li>extra：Using Index使用覆盖索引，Using where使用了where子句来过滤结果集，Using filesort使用文件排序（使用了费索引排序时出现，很消耗性能，需要优化），Using temporary使用了临时表；</ul></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/'>数据库</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/mysql/" class="post-tag no-text-decoration" >MySQL</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=MySQL备忘笔记 - 严能发的博客&url=https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=MySQL备忘笔记 - 严能发的博客&u=https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=MySQL备忘笔记 - 严能发的博客&url=https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>最近更新</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/Linux%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/">Linux系统的内存管理</a><li><a href="/posts/%E9%99%90%E6%B5%81%E7%9A%84%E7%90%86%E8%A7%A3/">你对限流了解多少</a><li><a href="/posts/SSM%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/">SSM框架整合</a><li><a href="/posts/JavaWeb%E6%A8%A1%E6%9D%BF/">Java Web开发模板</a><li><a href="/posts/SpringMVC%E8%AF%A6%E8%A7%A3/">SpringMVC详解</a></ul></div><div id="access-tags"> <span>文章标签</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/php/">PHP</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springmvc/">SpringMVC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/el%E8%A1%A8%E8%BE%BE%E5%BC%8F/">EL表达式</a> <a class="post-tag" href="/tags/exception/">Exception</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/kafka/">KAFKA</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>更多文章</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Linux%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86/"><div class="card-body"> <span class="timeago small" > Nov 9 <i class="unloaded">2021-11-09T06:36:31+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Linux系统的内存管理</h3><div class="text-muted small"><p> 内存管理的发展过程 DOS操作系统时代 磁盘操作系统（Disk Operating System），是早期个人计算机上的一类操作系统。DOS在IBM PC 兼容机市场中占有举足轻重的地位。可以直接操纵管理硬盘的文件，以DOS的形式运行。微软图形界面操作系统Windows NT问世以来，DOS是一个后台程序的形式出现的。名为Windows命令提示符。可以通过点击运行-CMD进入。 特点：...</p></div></div></a></div><div class="card"> <a href="/posts/JavaWeb%E6%A8%A1%E6%9D%BF/"><div class="card-body"> <span class="timeago small" > Oct 25 <i class="unloaded">2021-10-25T23:10:31+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Java Web开发模板</h3><div class="text-muted small"><p> Java Web开发模板 1、Servlet项目web.xml模板： 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 &lt;?xml version="1.0" encoding="UTF-8" ?&gt; &lt;web-app xmlns="http://xmlns.jcp.org/xml/ns/javaee" ...</p></div></div></a></div><div class="card"> <a href="/posts/%E5%85%AB%E5%A4%A7%E5%9F%BA%E6%9C%AC%E6%8E%92%E5%BA%8F%E7%9A%84Java%E5%92%8CPHP%E5%AE%9E%E7%8E%B0/"><div class="card-body"> <span class="timeago small" > Jul 2 <i class="unloaded">2021-07-02T18:47:31+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>常用的基本排序的Java和PHP实现</h3><div class="text-muted small"><p> 常用的基本排序的Java和PHP实现</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%E9%99%90%E6%B5%81%E7%9A%84%E7%90%86%E8%A7%A3/" class="btn btn-outline-primary" prompt="上一篇"><p>你对限流了解多少</p></a> <a href="/posts/Docker%E4%B8%8EKubernetes%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="btn btn-outline-primary" prompt="下一篇"><p>Docker与Kubernetes学习笔记</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Comments powered by <a href="https://disqus.com/">Disqus</a>.</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//ynf.disqus.com/embed.js', disqusConfig: function() { this.page.title = 'MySQL备忘笔记'; this.page.url = 'https://youthynf.github.io/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/'; this.page.identifier = '/posts/MySQL%E5%A4%87%E5%BF%98%E7%AC%94%E8%AE%B0/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://github.com/youthynf">ynf</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">文章标签</h4><a class="post-tag" href="/tags/java/">JAVA</a> <a class="post-tag" href="/tags/mybatis/">MyBatis</a> <a class="post-tag" href="/tags/php/">PHP</a> <a class="post-tag" href="/tags/spring/">Spring</a> <a class="post-tag" href="/tags/springmvc/">SpringMVC</a> <a class="post-tag" href="/tags/docker/">Docker</a> <a class="post-tag" href="/tags/el%E8%A1%A8%E8%BE%BE%E5%BC%8F/">EL表达式</a> <a class="post-tag" href="/tags/exception/">Exception</a> <a class="post-tag" href="/tags/jekyll/">Jekyll</a> <a class="post-tag" href="/tags/kafka/">KAFKA</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://youthynf.github.io{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
